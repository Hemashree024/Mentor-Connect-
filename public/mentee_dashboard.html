<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mentee Dashboard</title>
  <style>



   body { 
  font-family: Arial, sans-serif; 
  background-color: #f4f6f9; 
  margin: 0; 
  padding: 0; 
}	

.sidebar { 
  width: 220px; 
  height: 100vh; 
  position: fixed; 
  background-color: #1a1a2e; 
  color: #e5dada; 
  padding: 20px; 
}

.sidebar h2 { 
  font-size: 1.7em; 
  margin-bottom: 30px; 
  color: #efe1e4; 
  font-weight: bold;
}

.sidebar ul { 
  list-style: none; 
  padding: 0; 
}

.sidebar ul li { 
  padding: 15px; 
  cursor: pointer; 
}

.sidebar ul li:hover { 
  background-color: #333; 
}

.dashboard { 
  margin-left: 250px; 
  padding: 20px; 
}

.profile img { 
  width: 100px; 
  height: 100px; 
  border-radius: 50%; 
  margin-bottom: 10px; 
}

.profile h2 { 
  font-size: 1.5em; 
  color: #e94560; 
}

.profile p { 
  color: #777; 
}

/* Profile Section CSS */
#profile {
  background-color: #fff; /* White background for contrast */
  border-radius: 8px; /* Rounded corners */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
  padding: 20px; /* Padding for spacing */
  margin-top: 20px; /* Space from the top */
}

#profile h2 {
  font-size: 2em; /* Larger font for the profile title */
  color: #1a1a2e; /* Dark color for the title */
  margin-bottom: 15px; /* Space below the title */
}

#profileInfo {
  line-height: 1.6; /* Improved line height for readability */
  color: #555; /* Dark grey for text */
}

#profileInfo img {
  width: 100px; /* Profile image size */
  height: 100px; /* Profile image size */
  border-radius: 50%; /* Circular image */
  border: 2px solid #e94560; /* Border color to match theme */
  margin-bottom: 15px; /* Space below the image */
}

#profileInfo p {
  margin: 10px 0; /* Space between paragraphs */
}

#profileInfo a {
  color: #e94560; /* Link color to match theme */
  text-decoration: none; /* Remove underline from links */
  transition: color 0.3s; /* Smooth color transition on hover */
}

#profileInfo a:hover {
  text-decoration: underline; /* Underline on hover for emphasis */
}

/* Mentor List CSS */
#mentorList {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 20px;
}

.mentor {
  background-color: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  width: 280px;
  text-align: center;
  transition: transform 0.3s ease-in-out;
}

.mentor:hover {
  transform: translateY(-10px);
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
}

.mentor img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 15px;
}

.mentor h3 {
  font-size: 1.2em;
  font-weight: bold;
  color: #333;
  margin-bottom: 10px;
}

.mentor p {
  color: #666;
  font-size: 0.95em;
  margin: 5px 0;
}

.mentor button {
  background-color: #e94560;
  color: #fff;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1em;
  margin-top: 10px;
  transition: background-color 0.3s ease;
}

  .notifications-container {
    border: 1px solid #ccc;
    padding: 10px;
    margin: 10px;
    max-height: 300px;
    overflow-y: auto;
  }

  .notification {
    border-bottom: 1px solid #ddd;
    padding: 5px;
  }

  .notification p {
    margin: 0;
  }

  .notification small {
    color: gray;
    font-size: 0.8em;
  }

.mentor button:hover {
  background-color: #d33450;
}

/* Home Section */
#home {
  background-color: #fff; /* Background color for the Home section */
  border-radius: 8px; /* Rounded corners */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
  padding: 20px; /* Padding for spacing */
  margin-top: 20px; /* Space from the top */
}

#home h2 {
  font-size: 2em; /* Larger font for the Home section title */
  color: #1a1a2e; /* Darker color for the title */
  margin-bottom: 15px; /* Space below the title */
  border-bottom: 2px solid #e94560; /* Underline for emphasis */
  padding-bottom: 10px; /* Space between title and content */
}

#home p {
  font-size: 1em; /* Standard font size for the description */
  color: #555; /* Subtle gray color for text */
  line-height: 1.6; /* Improved line height for readability */
  margin-bottom: 20px; /* Space below the paragraph */
}

.search-box {
  display: flex; /* Arrange input and button in a row */
  justify-content: center; /* Center align the search box */
  margin-bottom: 50px; /* Space below the search box */
}

.search-box input {
  width: 300px; /* Input field width */
  padding: 10px; /* Padding for better UX */
  border: 1px solid #ccc; /* Border color */
  border-radius: 4px; /* Rounded corners */
  font-size: 1em; /* Font size */
  margin-right: 10px; /* Space between input and button */
  box-sizing: border-box; /* Ensure consistent sizing */
}

.search-box button {
  background-color: #e94560; /* Button background color */
  color: #fff; /* Button text color */
  padding: 10px 20px; /* Padding for size */
  border: none; /* No border */
  border-radius: 4px; /* Rounded corners */
  cursor: pointer; /* Pointer cursor on hover */
  font-size: 1em; /* Font size */
  transition: background-color 0.3s ease; /* Smooth hover effect */
}

.search-box button:hover {
  background-color: #27a2cb; /* Darker color on hover */
}

.notification {
  margin-top: 20px; /* Space at the top of notifications */
  padding: 15px; /* Padding around notifications */
  background-color: #f9f9f9; /* Light gray background */
  border: 1px solid #ccc; /* Subtle border */
  border-radius: 5px; /* Rounded corners */
  color: #333; /* Text color */
}

.notification p {
  margin: 0; /* Remove extra margins */
  font-size: 0.9em; /* Slightly smaller text */
}

.notification small {
  color: gray; /* Gray color for timestamps */
  font-size: 0.8em; /* Small text size for timestamps */
}

/* Mentor List Horizontal Layout */
/* Mentor List - Single Mentor per Row */
#mentorList {
  display: flex; /* Use flexbox */
  flex-direction: column; /* Arrange items vertically */
  gap: 20px; /* Space between mentor cards */
  padding: 10px; /* Add padding for spacing */
  margin-top: 20px; /* Space from the top */
}

#mentorList .mentor-card {
  width: 100%; /* Ensure each card takes full row width */
  box-sizing: border-box; /* Include padding and border in width */
  padding: 15px; /* Add padding inside each card */
  border: 1px solid #ccc; /* Add a light border */
  border-radius: 8px; /* Optional: rounded corners */
  background-color: #f9f9f9; /* Optional: card background color */
}

.mentor {
  background-color: #fff; /* Background color for mentor card */
  padding: 20px; /* Padding for spacing */
  border-radius: 10px; /* Rounded corners */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
  min-width: 250px; /* Minimum width for mentor card */
  text-align: center; /* Center align text */
  transition: transform 0.3s ease-in-out; /* Smooth hover animation */
  flex-shrink: 0; /* Prevent shrinking */
}

.mentor:hover {
  transform: translateY(-10px); /* Lift effect on hover */
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2); /* Deeper shadow on hover */
}

.mentor img {
  width: 80px; /* Fixed width for image */
  height: 80px; /* Fixed height for image */
  border-radius: 50%; /* Circular image */
  object-fit: cover; /* Maintain aspect ratio */
  margin-bottom: 15px; /* Space below the image */
}

.mentor h3 {
  font-size: 1.2em; /* Font size for mentor name */
  font-weight: bold; /* Bold text */
  color: #333; /* Text color */
  margin-bottom: 10px; /* Space below the name */
}

.mentor p {
  color: #666; /* Text color */
  font-size: 0.95em; /* Font size */
  margin: 5px 0; /* Space between paragraphs */
}

.mentor button {
  background-color: #ac1a32; /* Button color */
  color: #fff; /* Button text color */
  padding: 10px 20px; /* Padding for size */
  border: none; /* No border */
  border-radius: 5px; /* Rounded corners */
  cursor: pointer; /* Pointer cursor */
  font-size: 1em; /* Font size */
  margin-top: 10px; /* Space above button */
  transition: background-color 0.3s ease; /* Smooth hover effect */
}

.mentor button:hover {
  background-color: #0e6e0f; /* Darker button nocolor on hover */
}

/* Profile Section CSS */
#profile {
  background-color: #fff; /* White background for contrast */
  border-radius: 8px; /* Rounded corners */
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
  padding: 20px; /* Padding for spacing */
  margin-top: 20px; /* Space from the top */
}

#profile h2 {
  font-size: 2em; /* Larger font for the profile title */
  color: #1a1a2e; /* Dark color for the title */
  margin-bottom: 15px; /* Space below the title */
  border-bottom: 2px solid #e94560; /* Underline for emphasis */
  padding-bottom: 10px; /* Space between title and content */
}

#profileInfo {
  line-height: 1.6; /* Improved line height for readability */
  color: #555; /* Dark grey for text */
  display: flex; /* Use flexbox for layout */
  flex-direction: column; /* Stack items vertically */
  gap: 15px; /* Space between items */
}
#profileInfo div {
  display: flex;
  align-items: center;
  gap: 18px; /* Space between image and text */
}

#profileInfo img {
  width: 150px; /* Profile image size */
  height: 150px; /* Profile image size */
  border-radius: 70%; /* Circular image */
  border: 2px solid #e94560; /* Border color to match theme */
  margin-bottom: 15px; /* Space below the image */
}

#profileInfo p {
  margin: 0; /* Remove default margin */
  font-size: 1em; /* Standard font size for details */
  color: #555; /* Standard color for text */
}

#profileInfo a {
  color: #e94560; /* Link color to match theme */
  text-decoration: none; /* Remove underline from links */
  transition: color 0.3s; /* Smooth color transition on hover */
}

#profileInfo a:hover {
  text-decoration: underline; /* Underline on hover for emphasis */
}

/* Add a card-like effect for the profile section */
.profile-card {
  background-color: #f9f9f9; /* Light gray background for the card */
  border-radius: 8px; /* Rounded corners */
  padding: 15px; /* Padding for spacing */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Subtle shadow */
}

.mentor-photo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
}

.mentor {
    border: 1px solid #ccc;
    padding: 15px;
    margin: 10px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
}

.mentor-photo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
}


</style>
</head>
<body>

  <div class="sidebar">
    <h2>MENTEE DASHBOARD</h2>
    <ul>
      <li onclick="showSection('home')">Home</li>
      <li onclick="showSection('profile')">Profile</li>
      
      <li onclick="showSection('notifications')">notifications</li>
      
      <li onclick="showSection('settings')">Settings</li>
      <li onclick="logout()">Logout</li>
    </ul>
  </div>

  <div class="dashboard">
    <h4>MENTEE DASHBOARD</h4>

    <div id="home">
     
      <div class="search-box">
        <input type="text" id="search" placeholder="Search mentors by name...">
        <button onclick="searchMentors()">Search</button>
      </div>
      <div id="mentorList"></div>
      <div class="notification" id="notification"></div>
    </div>

    <div id="profile">
      <h3>MENTEE PROFILE </h3>
      <div id="profileInfo">
        <!-- Profile info will be displayed here -->
      </div>
    </div>

    <div id="requests">
      <h2>Requests</h2>
      <p>View and manage your mentor requests here.</p>
    </div>
     
   
    <div id="notifications">
      <h3>Notifications</h3>
      <ul id="notifications-list"></ul>
  </div>
   
 

    

    <div id="meetings">
      
    </div>

    <div id="settings">
      <h2>Settings</h2>
      <p>Manage your account settings here.</p>
    </div>
  </div>

  <script>
 // Fetch mentee profile data
 function loadProfile() {
      fetch('/api/mentee_profile')
        .then(response => response.json())
        .then(data => {
          if (data) {
            document.getElementById("profileInfo").innerHTML = `
               <div style="display: flex; align-items: center; margin-bottom: 20px;">
                <img id="profileImage" src="/uploads/default.png" alt="Profile Photo" />

            
            <div>
              <h2 style="margin: 0; color: #1a1a2e;">${data.firstName} ${data.lastName}</h2>
              
          </div>
        </div>

             
              <p>Email: ${data.email}</p>
              <p>Scope: ${data.scope}</p>
              <p>Department: ${data.department}</p>
              <p>Semester: ${data.semester}</p>
              
            `;
          } else {
            document.getElementById("profileInfo").innerHTML = "Error loading profile information.";
          }
        })
        .catch(error => {
          console.error("Error:", error);
          document.getElementById("profileInfo").innerHTML = "Error loading profile information.";
        });
    }

  // Search mentors based on the search query
  function searchMentors() {
      const query = document.getElementById("search").value;
      if (query) {
        fetch(`/api/mentors?search=${query}`)
          .then(response => response.json())
          .then(data => {
            const mentorList = document.getElementById("mentorList");
            mentorList.innerHTML = '';
            data.forEach(mentor => {
              mentorList.innerHTML += `
                <div class="mentor-card">
                  <h3>${mentor.firstName} ${mentor.lastName}</h3>
                  <p>Category: ${mentor.category}</p>
                  <p>Skills: ${mentor.skills}</p>
                  <p>Email: ${mentor.email}</p>
                  <button onclick="sendRequest(${mentor.id})">Send Request</button>
                </div>
              `;
            });
          })
          .catch(error => {
            console.error("Error:", error);
          });
      }
    }
  


   



    // Show specific section
    function showSection(section) {
      const sections = ['home', 'profile', 'requests', 'notifications', 'meetings', 'settings'];
      sections.forEach(sec => {
        document.getElementById(sec).style.display = sec === section ? 'block' : 'none';
      });
    }

    // Logout function
    function logout() {
      window.location.href = "/login_mentee.html";
    }

    // Fetch and display all mentors
    function loadMentors() {
    fetch('/api/mentors')
        .then(response => response.json())
        .then(mentors => {
            displayMentors(mentors);
        })
        .catch(error => {
            console.error("Error:", error);
        });
}

// Display mentors in the mentor list
function displayMentors(mentors) {
    const mentorList = document.getElementById("mentorList");
    mentorList.innerHTML = mentors.map(mentor => {
        const profilePhoto = mentor.profilePhoto ? `/uploads/${mentor.profilePhoto}` : '/uploads/default.jpg'; // Use mentor's image or default
        return `
            <div class="mentor">
                <img src="${profilePhoto}" alt="Profile Photo" onerror="this.onerror=null;this.src='/uploads/default.jpg';">
                <h3>${mentor.firstName} ${mentor.lastName}</h3>
                <p>Category: ${mentor.category}</p>
                <p>Department: ${mentor.department}</p>
                <p>Skills: ${mentor.skills}</p>
                <p>Email: ${mentor.email}</p>
                <p>Achievements: ${mentor.achievements}</p>
                <button onclick="sendRequest('${mentor._id}')">Send Request</button>
            </div>
        `;
    }).join("");
}



// Send a request to a mentor
function sendRequest(mentorId) {
    const menteeId = "<MENTEE_ID_FROM_SESSION>"; // You need to dynamically fetch the mentee ID from session
    const message = "I would like to connect with you as my mentor."; // Optional message
    fetch('/api/send_request', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ mentorId, menteeId, message }) // Include message if needed
    })
    .then(response => {
        if (response.ok) {
            alert("Request sent successfully!");
        } else {
            alert("Failed to send request.");
        }
    })
    .catch(error => console.error("Error:", error));
}

function searchMentors() {
    const query = document.getElementById("search").value.toLowerCase();
    if (query) {
        fetch(`/api/mentors`)
            .then(response => response.json())
            .then(data => {
                const filteredMentors = data.filter(mentor =>
                    `${mentor.firstName} ${mentor.lastName}`.toLowerCase().includes(query)
                );
                displayMentors(filteredMentors);
            })
            .catch(error => {
                console.error("Error:", error);
            });
    } else {
        loadMentors(); // Load all mentors if no search term is entered
    }
}
 
// Fetch notifications from the API
function loadNotifications() {
  fetch('/api/notifications')
    .then(response => response.json())
    .then(data => {
      const notificationsDiv = document.getElementById('notifications');
      notificationsDiv.innerHTML = '';
      data.forEach(notification => {
        notificationsDiv.innerHTML += `
          <div class="notification">
            <p>${notification.message}</p>
            <p><small>${new Date(notification.timestamp).toLocaleString()}</small></p>
          </div>
        `;
      });
    })
    .catch(err => console.error("Error loading notifications:", err));
}

// Call loadNotifications() when mentee dashboard is loaded or refreshed
loadNotifications();

    // Initial load
    loadProfile();
    loadMentors();
    // Initial load of requests on the Mentor Dashboard
  loadRequests();
  </script>
</body>
</html> 

